% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/step_collinear.R
\name{step_collinear}
\alias{step_collinear}
\alias{prep.step_collinear}
\alias{bake.step_collinear}
\title{Tidymodels Integration of \code{\link[=collinear]{collinear()}}}
\usage{
step_collinear(
  recipe,
  ...,
  role = NA,
  trained = FALSE,
  options = list(),
  selected = NULL,
  skip = FALSE,
  keep_original_cols = FALSE,
  id = recipes::rand_id("collinear")
)

\method{prep}{step_collinear}(x, training, info = NULL, ...)

\method{bake}{step_collinear}(object, new_data, ...)
}
\arguments{
\item{recipe}{(required, recipe) A recipe object to which this step will be added.}

\item{...}{(optional) Additional arguments (currently ignored).}

\item{role}{(optional, character) Not used by this step since no new variables are created.}

\item{trained}{(optional, logical) Indicates if the step has been trained.}

\item{options}{(optional, list) Named list of arguments passed to
\code{\link[=collinear]{collinear()}}. Common options include:
\itemize{
\item \code{max_cor}: Maximum correlation threshold (default: auto)
\item \code{max_vif}: Maximum VIF threshold (default: auto)
\item \code{preference_order}: Vector of predictor names in priority order
\item \code{f}:
\item \code{quiet}: Suppress messages (default: FALSE)
}
Note: \code{encoding_method} is not supported in this step.}

\item{selected}{(character, internal) Predictors retained after filtering.}

\item{skip}{(logical, optional) Should the step be skipped when baking? Defaults to FALSE.}

\item{keep_original_cols}{(logical, optional) Whether to keep original columns. Default: FALSE.}

\item{id}{(character, optional) Unique identifier for this step.}

\item{x}{(step_collinear object) The step to be trained.}

\item{training}{(data.frame) The training dataset used to estimate quantities.}

\item{info}{(data.frame, optional) Preprocessed information about variables in \code{training}.}

\item{object}{(step_collinear object) The trained step.}

\item{new_data}{(data.frame) New data to apply the step to.}
}
\value{
A \code{step_collinear} object.
}
\description{
Adds a step to a \code{\link[recipes:recipe]{recipes::recipe()}} that removes collinear predictors using
\code{\link[=collinear]{collinear()}}. Unlike \code{\link[=collinear]{collinear()}}, this wrapper does not perform target encoding.

This step requires the \strong{recipes} package to be installed.
}
\examples{
\dontrun{
if(requireNamespace("recipes", quietly = TRUE) &&
    requireNamespace("parsnip", quietly = TRUE) &&
    requireNamespace("workflows", quietly = TRUE)
    ){

data(
  vi_smol,
  vi_predictors_numeric
  )

# model formula
vi_formula <- collinear::model_formula(
  df = vi_smol,
  response = "vi_numeric",
  predictors = vi_predictors_numeric
)

# recipe
vi_recipe <- recipes::recipe(
  formula = vi_formula,
  data = vi_smol
  ) |>
  #multicollinearity filtering
  collinear::step_collinear(
    recipes::all_predictors(),
    options = list(
      max_cor = 0.7,
      max_vif = 5,
      f = collinear::f_numeric_glm
      )
  ) |>
  #normalization
  recipes::step_normalize(
    recipes::all_predictors()
    )

# define linear regression model
vi_model <- parsnip::linear_reg() |>
  parsnip::set_engine("lm")

# create and fit workflow
vi_workflow <- workflows::workflow() |>
  workflows::add_recipe(vi_recipe) |>
  workflows::add_model(vi_model) |>
  workflows::fit(data = vi_smol)

vi_workflow

}
}
}
