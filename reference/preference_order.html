<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en-US"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Rank predictors by importance or multicollinearity — preference_order • collinear</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Rank predictors by importance or multicollinearity — preference_order"><meta name="description" content="Generates a valid input for the argument preference_order of the functions vif_select(), cor_select(), collinear_select(), and collinear(). This argument helps preserve important predictors during multicollinearity filtering.
The function works in two different ways:
When f is NULL, it ranks the predictors from lower to higher multicollinearity, computed as one minus the average Pearson correlation between the given predictor against all others. This option is useful when the goal is to limit redundancy in a large dataset and there is not an specific model to train in mind.
When responses and f are not NULL, it ranks the predictors by the strength of their association with a response based on the evaluation of univariate models. This is the best possible option when the end-goal is training a model.


The argument f (requires a valid resopnses argument) defines how the strength of association between the response and each predictor is computed. By default it calls f_auto(), which uses f_auto_rules() to select a suitable function depending on the types of the response and the predictors. This option is designed to provide sensible, general-purpose defaults optimized for speed and stability rather than any specific modeling approach.
For more fine-tuned control, the package offers the following f functions (see f_functions()):

Numeric response:
f_numeric_glm(): Pearson's R-squared of response versus the predictions of a Gaussian GLM.
f_numeric_gam(): GAM model fitted with mgcv::gam().
f_numeric_rf(): Random Forest model fitted with ranger::ranger().

Integer counts response:
f_count_glm(): Pearson's R-squared of a Poisson GLM.
f_count_gam(): Poisson GAM.
f_count_rf(): Random Forest model fitted with ranger::ranger().

Binomial response (1 and 0):
f_binomial_glm(): AUC of Quasibinomial GLM with weighted cases.
f_binomial_gam(): AUC of Quasibinomial GAM with weighted cases.
f_binomial_rf(): AUC of a Random Forest model with weighted cases.

Categorical response:
f_categorical_rf(): Cramer's V of the response against the predictions of a classification Random Forest model.



These functions accept a cross-validation setup via the arguments cv_iterations and cv_training_fraction.
Additionally, the argument f accepts any custom function taking a dataframe with the columns &quot;x&quot; (predictor) and &quot;y&quot; (response) and returning a numeric indicator of association.
Accepts a parallelization setup via future::plan() and a progress bar via progressr::handlers() (see examples).
Accepts a character vector of response variables as input for the argument responses. When more than one response is provided, the output is a named list of preference data frames."><meta property="og:description" content="Generates a valid input for the argument preference_order of the functions vif_select(), cor_select(), collinear_select(), and collinear(). This argument helps preserve important predictors during multicollinearity filtering.
The function works in two different ways:
When f is NULL, it ranks the predictors from lower to higher multicollinearity, computed as one minus the average Pearson correlation between the given predictor against all others. This option is useful when the goal is to limit redundancy in a large dataset and there is not an specific model to train in mind.
When responses and f are not NULL, it ranks the predictors by the strength of their association with a response based on the evaluation of univariate models. This is the best possible option when the end-goal is training a model.


The argument f (requires a valid resopnses argument) defines how the strength of association between the response and each predictor is computed. By default it calls f_auto(), which uses f_auto_rules() to select a suitable function depending on the types of the response and the predictors. This option is designed to provide sensible, general-purpose defaults optimized for speed and stability rather than any specific modeling approach.
For more fine-tuned control, the package offers the following f functions (see f_functions()):

Numeric response:
f_numeric_glm(): Pearson's R-squared of response versus the predictions of a Gaussian GLM.
f_numeric_gam(): GAM model fitted with mgcv::gam().
f_numeric_rf(): Random Forest model fitted with ranger::ranger().

Integer counts response:
f_count_glm(): Pearson's R-squared of a Poisson GLM.
f_count_gam(): Poisson GAM.
f_count_rf(): Random Forest model fitted with ranger::ranger().

Binomial response (1 and 0):
f_binomial_glm(): AUC of Quasibinomial GLM with weighted cases.
f_binomial_gam(): AUC of Quasibinomial GAM with weighted cases.
f_binomial_rf(): AUC of a Random Forest model with weighted cases.

Categorical response:
f_categorical_rf(): Cramer's V of the response against the predictions of a classification Random Forest model.



These functions accept a cross-validation setup via the arguments cv_iterations and cv_training_fraction.
Additionally, the argument f accepts any custom function taking a dataframe with the columns &quot;x&quot; (predictor) and &quot;y&quot; (response) and returning a numeric indicator of association.
Accepts a parallelization setup via future::plan() and a progress bar via progressr::handlers() (see examples).
Accepts a character vector of response variables as input for the argument responses. When more than one response is provided, the output is a named list of preference data frames."><meta property="og:image" content="https://blasbenito.github.io/collinear/logo.png"><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">collinear</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">3.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/unified_correlation_framework.html">Unified Correlation Framework</a></li>
    <li><a class="dropdown-item" href="../articles/intelligent_predictor_ranking.html">Intelligent Predictor Ranking</a></li>
    <li><a class="dropdown-item" href="../articles/target_encoding.html">Target Encoding</a></li>
    <li><a class="dropdown-item" href="../articles/adaptive_filtering_thresholds.html">Adaptive Filtering Thresholds</a></li>
    <li><a class="dropdown-item" href="../articles/dual_filtering_strategy.html">Dual Filtering Strategy</a></li>
    <li><a class="dropdown-item" href="../articles/collinear_in_the_wild.html">collinear In The Wild</a></li>
  </ul></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-blog-posts" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Blog Posts</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-blog-posts"><li><a class="external-link dropdown-item" href="https://www.blasbenito.com/post/multicollinearity-model-interpretability/">Multicollinearity Hinders Model Interpretability</a></li>
    <li><a class="external-link dropdown-item" href="https://www.blasbenito.com/post/variance-inflation-factor/">Everything About Variance Inflation Factors</a></li>
    <li><a class="external-link dropdown-item" href="https://www.blasbenito.com/post/target-encoding/">Mapping Categorical Predictors to Numeric</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/blasbenito/collinear/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Rank predictors by importance or multicollinearity</h1>
      <small class="dont-index">Source: <a href="https://github.com/blasbenito/collinear/blob/main/R/preference_order.R" class="external-link"><code>R/preference_order.R</code></a></small>
      <div class="d-none name"><code>preference_order.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Generates a valid input for the argument <code>preference_order</code> of the functions <code><a href="vif_select.html">vif_select()</a></code>, <code><a href="cor_select.html">cor_select()</a></code>, <code><a href="collinear_select.html">collinear_select()</a></code>, and <code><a href="collinear.html">collinear()</a></code>. This argument helps preserve important predictors during multicollinearity filtering.</p>
<p>The function works in two different ways:</p><ul><li><p>When <code>f</code> is NULL, it ranks the predictors from lower to higher multicollinearity, computed as one minus the average Pearson correlation between the given predictor against all others. This option is useful when the goal is to limit redundancy in a large dataset and there is not an specific model to train in mind.</p></li>
<li><p>When <code>responses</code> and <code>f</code> are not NULL, it ranks the predictors by the strength of their association with a response based on the evaluation of univariate models. This is the best possible option when the end-goal is training a model.</p></li>
</ul><p>The argument <code>f</code> (requires a valid <code>resopnses</code> argument) defines how the strength of association between the response and each predictor is computed. By default it calls <code><a href="f_auto.html">f_auto()</a></code>, which uses <code><a href="f_auto_rules.html">f_auto_rules()</a></code> to select a suitable function depending on the types of the response and the predictors. This option is designed to provide sensible, general-purpose defaults optimized for speed and stability rather than any specific modeling approach.</p>
<p>For more fine-tuned control, the package offers the following <code>f</code> functions (see <code><a href="f_functions.html">f_functions()</a></code>):</p>
<ul><li><p><strong>Numeric response</strong>:</p><ul><li><p><code><a href="f_numeric_glm.html">f_numeric_glm()</a></code>: Pearson's R-squared of response versus the predictions of a Gaussian GLM.</p></li>
<li><p><code><a href="f_numeric_gam.html">f_numeric_gam()</a></code>: GAM model fitted with <code><a href="https://rdrr.io/pkg/mgcv/man/gam.html" class="external-link">mgcv::gam()</a></code>.</p></li>
<li><p><code><a href="f_numeric_rf.html">f_numeric_rf()</a></code>: Random Forest model fitted with <code><a href="http://imbs-hl.github.io/ranger/reference/ranger.html" class="external-link">ranger::ranger()</a></code>.</p></li>
</ul></li>
<li><p><strong>Integer counts response</strong>:</p><ul><li><p><code><a href="f_count_glm.html">f_count_glm()</a></code>: Pearson's R-squared of a Poisson GLM.</p></li>
<li><p><code><a href="f_count_gam.html">f_count_gam()</a></code>: Poisson GAM.</p></li>
<li><p><code><a href="f_count_rf.html">f_count_rf()</a></code>: Random Forest model fitted with <code><a href="http://imbs-hl.github.io/ranger/reference/ranger.html" class="external-link">ranger::ranger()</a></code>.</p></li>
</ul></li>
<li><p><strong>Binomial response (1 and 0)</strong>:</p><ul><li><p><code><a href="f_binomial_glm.html">f_binomial_glm()</a></code>: AUC of Quasibinomial GLM with weighted cases.</p></li>
<li><p><code><a href="f_binomial_gam.html">f_binomial_gam()</a></code>: AUC of Quasibinomial GAM with weighted cases.</p></li>
<li><p><code><a href="f_binomial_rf.html">f_binomial_rf()</a></code>: AUC of a Random Forest model with weighted cases.</p></li>
</ul></li>
<li><p><strong>Categorical response</strong>:</p><ul><li><p><code><a href="f_categorical_rf.html">f_categorical_rf()</a></code>: Cramer's V of the response against the predictions of a classification Random Forest model.</p></li>
</ul></li>
</ul><p>These functions accept a cross-validation setup via the arguments <code>cv_iterations</code> and <code>cv_training_fraction</code>.</p>
<p>Additionally, the argument <code>f</code> accepts any custom function taking a dataframe with the columns "x" (predictor) and "y" (response) and returning a numeric indicator of association.</p>
<p>Accepts a parallelization setup via <code><a href="https://future.futureverse.org/reference/plan.html" class="external-link">future::plan()</a></code> and a progress bar via <code><a href="https://progressr.futureverse.org/reference/handlers.html" class="external-link">progressr::handlers()</a></code> (see examples).</p>
<p>Accepts a character vector of response variables as input for the argument <code>responses</code>. When more than one response is provided, the output is a named list of preference data frames.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">preference_order</span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  responses <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  predictors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  f <span class="op">=</span> <span class="va">f_auto</span>,</span>
<span>  cv_training_fraction <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  cv_iterations <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(required; dataframe, tibble, or sf) A dataframe with responses
(optional) and predictors. Must have at least 10 rows for pairwise
correlation analysis, and <code>10 * (length(predictors) - 1)</code> for VIF.
Default: NULL.</p></dd>


<dt id="arg-responses">responses<a class="anchor" aria-label="anchor" href="#arg-responses"></a></dt>
<dd><p>(optional; character, character vector, or NULL) Name of
one or several response variables in <code>df</code>. Default: NULL.</p></dd>


<dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>(optional; character vector or NULL) Names of the
predictors in <code>df</code>. If NULL, all columns except <code>responses</code> and
constant/near-zero-variance columns are used. Default: NULL.</p></dd>


<dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p>(optional: function name) Unquoted function name without parenthesis (see <a href="f_functions.html">f_functions</a>). By default calls to <code><a href="f_auto.html">f_auto()</a></code>, which selects a suitable function depending on the nature of the response and predictors. Set to NULL if <code>responses = NULL</code>. If NULL, predictors are ranked from lower to higher multicollinearity. Default: <code>f_auto</code></p></dd>


<dt id="arg-cv-training-fraction">cv_training_fraction<a class="anchor" aria-label="anchor" href="#arg-cv-training-fraction"></a></dt>
<dd><p>(optional, numeric) Value between 0.1 and 1 defining the training faction used in cross-validation. If 1 (default), no cross-validation is performed, and the resulting metric is computed from all observations and predictions. Automatically set to 1 when <code>cv_iterations = 1</code>. Default: 1</p></dd>


<dt id="arg-cv-iterations">cv_iterations<a class="anchor" aria-label="anchor" href="#arg-cv-iterations"></a></dt>
<dd><p>(optional, integer) Number of cross-validation iterations to perform. The recommended range lies between 30 and 100. In general, smaller datasets and large values of <code>cv_training_fraction</code> require more iterations to achieve stability. Automatically set to 1 when <code>cv_training_fraction = 1</code>. Default: 1</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>(optional, integer) Random seed, required for reproducibility when using cross-validation or random forest models. Default: 1</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>(optional; logical) If FALSE, messages are printed. Default: FALSE.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>(optional) Internal args (e.g. <code>function_name</code> for
<code><a href="validate_arg_function_name.html">validate_arg_function_name</a></code>, a precomputed correlation matrix
<code>m</code>, or cross-validation args for <code>preference_order</code>).</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>dataframe:</p><ul><li><p><code>response</code>: character, response name, if any, or <code>"none"</code> otherwise.</p></li>
<li><p><code>predictor</code>: character, name of the predictor.</p></li>
<li><p><code>f</code>: name of the function used to compute the preference order. If argument <code>f</code> is NULL, the value "stats::cor()" is added to this column.</p></li>
<li><p><code>metric</code>: name of the metric used to assess strength of association. Usually one of "R-squared", "AUC" (Area Under the ROC Curve), or "Cramer's V". If <code>f</code> is a custom function not in <code><a href="f_functions.html">f_functions()</a></code>, then <code>metric</code> is set to "custom". If <code>f</code> is NULL, then "1 - R-squared" is returned in this column.</p></li>
<li><p><code>score</code>: value of the metric returned by <code>f</code> to assess the association between the <code>response</code> and each given <code>predictor</code>.</p></li>
<li><p><code>rank</code>: integer value indicating the rank of the predictor.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other preference_order_functions:
<code><a href="f_binomial_gam.html">f_binomial_gam()</a></code>,
<code><a href="f_binomial_glm.html">f_binomial_glm()</a></code>,
<code><a href="f_binomial_rf.html">f_binomial_rf()</a></code>,
<code><a href="f_categorical_rf.html">f_categorical_rf()</a></code>,
<code><a href="f_count_gam.html">f_count_gam()</a></code>,
<code><a href="f_count_glm.html">f_count_glm()</a></code>,
<code><a href="f_count_rf.html">f_count_rf()</a></code>,
<code><a href="f_numeric_gam.html">f_numeric_gam()</a></code>,
<code><a href="f_numeric_glm.html">f_numeric_glm()</a></code>,
<code><a href="f_numeric_rf.html">f_numeric_rf()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Blas M. Benito, PhD</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#load example data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">vi_smol</span>,</span></span>
<span class="r-in"><span>  <span class="va">vi_predictors_numeric</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##OPTIONAL: parallelization setup</span></span></span>
<span class="r-in"><span><span class="co"># future::plan(</span></span></span>
<span class="r-in"><span><span class="co">#   future::multisession,</span></span></span>
<span class="r-in"><span><span class="co">#   workers = future::availableCores() - 1</span></span></span>
<span class="r-in"><span><span class="co"># )</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">##OPTIONAL: progress bar</span></span></span>
<span class="r-in"><span><span class="co">##does not work in R examples</span></span></span>
<span class="r-in"><span><span class="co"># progressr::handlers(global = TRUE)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#ranking predictors from lower to higher multicollinearity</span></span></span>
<span class="r-in"><span><span class="co">#------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">preference_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi_smol</span>,</span></span>
<span class="r-in"><span>  responses <span class="op">=</span> <span class="cn">NULL</span>, <span class="co">#default value</span></span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors_numeric</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="cn">NULL</span> <span class="co">#must be explicit</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order(): ranking 10 'predictors' from lower to higher multicollinearity.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    response             predictor            f        metric  score rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      none        topo_elevation stats::cor() 1 - R-squared 0.8184    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      none        topo_diversity stats::cor() 1 - R-squared 0.8183    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      none            topo_slope stats::cor() 1 - R-squared 0.8001    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      none  soil_temperature_min stats::cor() 1 - R-squared 0.7434    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      none             swi_range stats::cor() 1 - R-squared 0.7387    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      none soil_temperature_mean stats::cor() 1 - R-squared 0.6534    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      none              swi_mean stats::cor() 1 - R-squared 0.6272    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      none               swi_max stats::cor() 1 - R-squared 0.6259    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      none               swi_min stats::cor() 1 - R-squared 0.6170    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     none  soil_temperature_max stats::cor() 1 - R-squared 0.6021   10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#automatic selection of ranking function</span></span></span>
<span class="r-in"><span><span class="co">#------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">preference_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi_smol</span>,</span></span>
<span class="r-in"><span>  responses <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"vi_numeric"</span>, <span class="st">"vi_categorical"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors_numeric</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">f_auto</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> └── collinear::validate_arg_df(): converted the following character columns to factor:</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - vi_categorical</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> └── collinear::validate_arg_responses(): argument 'response' must be of length 1, using response: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - vi_numeric</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order(): processing response 'vi_numeric'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ----------------------------------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> └── collinear::f_auto(): selected function 'f_numeric_glm()' to compute preference order.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order(): processing response 'vi_categorical'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> --------------------------------------------------------------------</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order()</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> └── collinear::f_auto(): selected function 'f_categorical_rf()' to compute preference order.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          response             predictor                f     metric  score rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1      vi_numeric              swi_mean    f_numeric_glm  R-squared 0.7182    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2      vi_numeric               swi_max    f_numeric_glm  R-squared 0.5549    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3      vi_numeric  soil_temperature_max    f_numeric_glm  R-squared 0.5462    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4      vi_numeric             swi_range    f_numeric_glm  R-squared 0.4225    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5      vi_numeric               swi_min    f_numeric_glm  R-squared 0.2130    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6      vi_numeric  soil_temperature_min    f_numeric_glm  R-squared 0.0972    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7      vi_numeric        topo_diversity    f_numeric_glm  R-squared 0.0663    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8      vi_numeric        topo_elevation    f_numeric_glm  R-squared 0.0351    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9      vi_numeric            topo_slope    f_numeric_glm  R-squared 0.0176    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10     vi_numeric soil_temperature_mean    f_numeric_glm  R-squared 0.0151   10</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11 vi_categorical              swi_mean f_categorical_rf Cramer's V 0.5881    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12 vi_categorical  soil_temperature_max f_categorical_rf Cramer's V 0.5679    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13 vi_categorical               swi_max f_categorical_rf Cramer's V 0.5363    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14 vi_categorical             swi_range f_categorical_rf Cramer's V 0.4871    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15 vi_categorical               swi_min f_categorical_rf Cramer's V 0.4491    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16 vi_categorical soil_temperature_mean f_categorical_rf Cramer's V 0.4015    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17 vi_categorical  soil_temperature_min f_categorical_rf Cramer's V 0.3878    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18 vi_categorical        topo_elevation f_categorical_rf Cramer's V 0.3287    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19 vi_categorical        topo_diversity f_categorical_rf Cramer's V 0.1992    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20 vi_categorical            topo_slope f_categorical_rf Cramer's V 0.1150   10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#user selection of ranking function</span></span></span>
<span class="r-in"><span><span class="co">#------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">#Poisson GLM for a integer counts response</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">preference_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi_smol</span>,</span></span>
<span class="r-in"><span>  responses <span class="op">=</span> <span class="st">"vi_binomial"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors_numeric</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">f_binomial_glm</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       response             predictor              f metric  score rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  vi_binomial              swi_mean f_binomial_glm    AUC 0.8800    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  vi_binomial  soil_temperature_max f_binomial_glm    AUC 0.8380    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  vi_binomial             swi_range f_binomial_glm    AUC 0.7452    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  vi_binomial  soil_temperature_min f_binomial_glm    AUC 0.7445    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  vi_binomial               swi_min f_binomial_glm    AUC 0.7230    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  vi_binomial               swi_max f_binomial_glm    AUC 0.7162    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  vi_binomial        topo_diversity f_binomial_glm    AUC 0.6805    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  vi_binomial            topo_slope f_binomial_glm    AUC 0.5975    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  vi_binomial        topo_elevation f_binomial_glm    AUC 0.5508    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 vi_binomial soil_temperature_mean f_binomial_glm    AUC 0.4432   10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#cross-validation</span></span></span>
<span class="r-in"><span><span class="co">#------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">preference_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi_smol</span>,</span></span>
<span class="r-in"><span>  responses <span class="op">=</span> <span class="st">"vi_binomial"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors_numeric</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">f_binomial_glm</span>,</span></span>
<span class="r-in"><span>  cv_training_fraction <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span>  cv_iterations <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>       response             predictor              f metric  score rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  vi_binomial              swi_mean f_binomial_glm    AUC 0.8811    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  vi_binomial  soil_temperature_max f_binomial_glm    AUC 0.8357    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  vi_binomial  soil_temperature_min f_binomial_glm    AUC 0.7505    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  vi_binomial             swi_range f_binomial_glm    AUC 0.7434    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  vi_binomial               swi_min f_binomial_glm    AUC 0.7229    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  vi_binomial               swi_max f_binomial_glm    AUC 0.7174    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  vi_binomial        topo_diversity f_binomial_glm    AUC 0.6846    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  vi_binomial            topo_slope f_binomial_glm    AUC 0.5911    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  vi_binomial        topo_elevation f_binomial_glm    AUC 0.5505    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 vi_binomial soil_temperature_mean f_binomial_glm    AUC 0.4615   10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#custom pairwise correlation function</span></span></span>
<span class="r-in"><span><span class="co">#------------------------------------------------</span></span></span>
<span class="r-in"><span><span class="co">#custom functions need the ellipsis argument</span></span></span>
<span class="r-in"><span><span class="va">f_rsquared</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">df</span>, <span class="va">...</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span>    <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/cor.html" class="external-link">cor</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>      x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">x</span>,</span></span>
<span class="r-in"><span>      y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">y</span>,</span></span>
<span class="r-in"><span>      use <span class="op">=</span> <span class="st">"complete.obs"</span></span></span>
<span class="r-in"><span>    <span class="op">)</span><span class="op">^</span><span class="fl">2</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">preference_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi_smol</span>,</span></span>
<span class="r-in"><span>  responses <span class="op">=</span> <span class="st">"vi_numeric"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors_numeric</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">f_rsquared</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      response             predictor          f metric  score rank</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1  vi_numeric              swi_mean f_rsquared custom 0.7182    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2  vi_numeric               swi_max f_rsquared custom 0.5549    2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3  vi_numeric  soil_temperature_max f_rsquared custom 0.5462    3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4  vi_numeric             swi_range f_rsquared custom 0.4225    4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5  vi_numeric               swi_min f_rsquared custom 0.2130    5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6  vi_numeric  soil_temperature_min f_rsquared custom 0.0972    6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7  vi_numeric        topo_diversity f_rsquared custom 0.0663    7</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8  vi_numeric        topo_elevation f_rsquared custom 0.0351    8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9  vi_numeric            topo_slope f_rsquared custom 0.0176    9</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10 vi_numeric soil_temperature_mean f_rsquared custom 0.0151   10</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#resetting to sequential processing</span></span></span>
<span class="r-in"><span><span class="co">#future::plan(future::sequential)</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
</div>

    </footer></div>





  </body></html>

