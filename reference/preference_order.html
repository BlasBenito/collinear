<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Compute the preference order for predictors based on a user-defined function. — preference_order • collinear</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Compute the preference order for predictors based on a user-defined function. — preference_order"><meta name="description" content="This function calculates the preference order of predictors based on a user-provided function that takes a predictor, a response, and a data frame as arguments."><meta property="og:description" content="This function calculates the preference order of predictors based on a user-provided function that takes a predictor, a response, and a data frame as arguments."></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">collinear</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Compute the preference order for predictors based on a user-defined function.</h1>

      <div class="d-none name"><code>preference_order.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function calculates the preference order of predictors based on a user-provided function that takes a predictor, a response, and a data frame as arguments.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">preference_order</span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  response <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  predictors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  f <span class="op">=</span> <span class="va">f_rsquared</span>,</span>
<span>  encoding_method <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  workers <span class="op">=</span> <span class="fl">1</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(required; data frame) A data frame with numeric and/or character predictors predictors, and optionally, a response variable. Default: NULL.</p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>(required, character string) Name of a numeric response variable. Character response variables are ignored. Please, see 'Details' to better understand how providing this argument or not leads to different results when there are character variables in 'predictors'. Default: NULL.</p></dd>


<dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>(optional; character vector) character vector with predictor names in 'df'. If omitted, all columns of 'df' are used as predictors. Default:'NULL'</p></dd>


<dt id="arg-f">f<a class="anchor" aria-label="anchor" href="#arg-f"></a></dt>
<dd><p>(optional: function) A function that returns a value representing the relationship between a given predictor and the response. Higher values are ranked higher. The available options are:</p><ul><li><p><code><a href="f_rsquared.html">f_rsquared()</a></code> (default option): returns the R-squared of the correlation between a numeric response and a numeric predictor.</p></li>
<li><p>f_gam_deviance: fits a univariate GAM model between a numeric response and a numeric predictor to return the explained deviance. Requires the package <code>mgcv</code>.</p></li>
<li><p><code><a href="f_rf_rsquared.html">f_rf_rsquared()</a></code> also named <code><a href="f_rf_rsquared.html">f_rf_deviance()</a></code>: fits a univariate random forest model with <code><a href="http://imbs-hl.github.io/ranger/reference/ranger.html" class="external-link">ranger::ranger()</a></code> between a numeric response and a numeric predictor to return the R-squared of the observations against the out-of-bag predictions. Requires the package <code>ranger</code>.</p></li>
<li><p><code><a href="f_logistic_auc_balanced.html">f_logistic_auc_balanced()</a></code>: fits a logistic univariate GLM of a balanced binary response (0s and 1s) against a numeric predictor to return the Area Under the Curve of the observations against the predictors.</p></li>
<li><p><code><a href="f_logistic_auc_unbalanced.html">f_logistic_auc_unbalanced()</a></code>: fits a quasibinomial univariate GLM with weighted cases of an unbalanced binary response (0s and 1s) against a numeric predictor to return the Area Under the Curve of the observations against the predictors.</p></li>
<li><p><code><a href="f_gam_auc_balanced.html">f_gam_auc_balanced()</a></code>: fits a logistic univariate GAM of a balanced binary response (0s and 1s) against a numeric predictor to return the Area Under the Curve of the observations against the predictors.</p></li>
<li><p><code><a href="f_gam_auc_unbalanced.html">f_gam_auc_unbalanced()</a></code>: fits a quasibinomial univariate GAM with weighted cases of an unbalanced binary response (0s and 1s) against a numeric predictor to return the Area Under the Curve of the observations against the predictors.</p></li>
<li><p><code><a href="f_rf_auc_balanced.html">f_rf_auc_balanced()</a></code>: fits a random forest model of a balanced binary response (0s and 1s) against a numeric predictor to return the Area Under the Curve of the observations against the predictors.</p></li>
<li><p><code><a href="f_rf_auc_unbalanced.html">f_rf_auc_unbalanced()</a></code>: fits a random forest model with weighted cases of an unbalanced binary response (0s and 1s) against a numeric predictor to return the Area Under the Curve of the observations against the predictors.</p></li>
</ul></dd>


<dt id="arg-encoding-method">encoding_method<a class="anchor" aria-label="anchor" href="#arg-encoding-method"></a></dt>
<dd><p>(optional; character string). Name of the target encoding method to convert character and factor predictors to numeric. One of "mean", "rank", "loo", "rnorm" (see <code><a href="target_encoding_lab.html">target_encoding_lab()</a></code> for further details). Default: "mean"</p></dd>


<dt id="arg-workers">workers<a class="anchor" aria-label="anchor" href="#arg-workers"></a></dt>
<dd><p>(integer) number of workers for parallel execution. Default: 1</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A data frame with the columns "predictor" and "value". The former contains the predictors names in order, ready for the argument <code>preference_order</code> in <code><a href="cor_select.html">cor_select()</a></code>, <code><a href="vif_select.html">vif_select()</a></code> and <code><a href="collinear.html">collinear()</a></code>. The latter contains the result of the function <code>f</code> for each combination of predictor and response.</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Blas M. Benito</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  <span class="va">vi_predictors</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#subset to limit example run time</span></span></span>
<span class="r-in"><span><span class="va">vi</span> <span class="op">&lt;-</span> <span class="va">vi</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#computing preference order</span></span></span>
<span class="r-in"><span><span class="co">#with response</span></span></span>
<span class="r-in"><span><span class="co">#numeric and categorical predictors in the output</span></span></span>
<span class="r-in"><span><span class="co">#as the R-squared between each predictor and the response</span></span></span>
<span class="r-in"><span><span class="va">preference.order</span> <span class="op">&lt;-</span> <span class="fu">preference_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">f_rsquared</span>,</span></span>
<span class="r-in"><span>  workers <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">preference.order</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     predictor   preference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            biogeo_ecoregion 9.269691e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                 koppen_zone 8.137065e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       growing_season_length 8.112105e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          koppen_description 7.984011e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                     soil_ph 7.531807e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6                    swi_mean 7.433342e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7               humidity_mean 7.367305e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                koppen_group 7.150807e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                country_name 6.852857e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10               biogeo_biome 6.770510e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11           cloud_cover_mean 6.479913e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12                  soil_type 6.465576e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13               humidity_max 6.237387e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14              rainfall_mean 6.157360e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15       soil_temperature_max 6.113000e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16            cloud_cover_max 6.007134e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17                    swi_max 5.933516e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               humidity_min 5.906650e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19    growing_season_rainfall 5.891538e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20     soil_temperature_range 5.411904e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21               biogeo_realm 5.240342e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22     evapotranspiration_max 5.165803e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23               rainfall_max 5.088829e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24              aridity_index 5.083582e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25              solar_rad_max 5.068879e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26                  subregion 4.548328e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27            cloud_cover_min 4.188023e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28                  swi_range 4.184972e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29   evapotranspiration_range 4.034224e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30             rainfall_range 3.843933e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31          temperature_range 3.796879e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32                    swi_min 2.606626e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33               rainfall_min 2.579713e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34    temperature_seasonality 2.491227e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35             solar_rad_mean 2.432788e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36              soil_nitrogen 2.315537e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37            temperature_max 2.102187e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38                  continent 1.799175e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39    evapotranspiration_mean 1.693217e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40                   soil_soc 1.601721e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41                     region 1.488327e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42          cloud_cover_range 1.434921e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43            solar_rad_range 1.232068e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44             topo_diversity 1.168882e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45            temperature_min 1.106311e-01</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46       soil_temperature_min 8.964740e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47                  soil_clay 7.751427e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48             humidity_range 6.741354e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49             country_income 5.641097e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50                 topo_slope 4.638905e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51                  soil_sand 4.324903e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52             topo_elevation 2.936205e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53      soil_temperature_mean 2.388867e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54 growing_season_temperature 1.279096e-02</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55                  soil_silt 7.505508e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56         country_population 4.045504e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57           temperature_mean 3.061162e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58                country_gdp 2.931651e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59              solar_rad_min 1.711591e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60        growing_degree_days 1.480086e-03</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61     evapotranspiration_min 2.170934e-05</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#using it in variable selection with collinear()</span></span></span>
<span class="r-in"><span><span class="va">selected.predictors</span> <span class="op">&lt;-</span> <span class="fu"><a href="cor_select.html">cor_select</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>, <span class="co">#don't forget the response!</span></span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span></span>
<span class="r-in"><span>  preference_order <span class="op">=</span> <span class="va">preference.order</span>,</span></span>
<span class="r-in"><span>  max_cor <span class="op">=</span> <span class="fl">0.75</span></span></span>
<span class="r-in"><span>  <span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">selected.predictors</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [1] "biogeo_ecoregion"       "soil_temperature_range" "evapotranspiration_max"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [4] "rainfall_max"           "solar_rad_max"          "subregion"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>  [7] "cloud_cover_min"        "swi_range"              "swi_min"               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [10] "rainfall_min"           "solar_rad_mean"         "soil_nitrogen"         </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [13] "continent"              "soil_soc"               "cloud_cover_range"     </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [16] "solar_rad_range"        "topo_diversity"         "soil_clay"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [19] "humidity_range"         "country_income"         "topo_slope"            </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [22] "soil_sand"              "topo_elevation"         "country_population"    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [25] "temperature_mean"       "country_gdp"           </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#check their correlations</span></span></span>
<span class="r-in"><span><span class="va">selected.predictors.cor</span> <span class="op">&lt;-</span> <span class="fu"><a href="cor_df.html">cor_df</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">selected.predictors</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#all correlations below max_cor</span></span></span>
<span class="r-in"><span><span class="va">selected.predictors.cor</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 325 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    x                      y                      correlation</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                        <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 1</span> temperature_mean       solar_rad_range             -<span style="color: #BB0000;">0.75</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 2</span> solar_rad_range        soil_temperature_range       0.742</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 3</span> soil_temperature_range biogeo_ecoregion            -<span style="color: #BB0000;">0.739</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 4</span> solar_rad_mean         swi_min                     -<span style="color: #BB0000;">0.737</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 5</span> soil_nitrogen          solar_rad_mean              -<span style="color: #BB0000;">0.736</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 6</span> cloud_cover_min        solar_rad_max               -<span style="color: #BB0000;">0.736</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 7</span> cloud_cover_min        evapotranspiration_max      -<span style="color: #BB0000;">0.726</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 8</span> soil_soc               soil_nitrogen                0.722</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;"> 9</span> rainfall_max           biogeo_ecoregion             0.718</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">10</span> solar_rad_max          biogeo_ecoregion            -<span style="color: #BB0000;">0.717</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># ℹ 315 more rows</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#USING A CUSTOM FUNCTION</span></span></span>
<span class="r-in"><span><span class="co">#custom function to compute RMSE between a predictor and a response</span></span></span>
<span class="r-in"><span><span class="co">#x is a predictor name</span></span></span>
<span class="r-in"><span><span class="co">#y is a response name</span></span></span>
<span class="r-in"><span><span class="co">#df is a data frame with multiple predictors and one response</span></span></span>
<span class="r-in"><span><span class="co">#must return a single number, with higher number indicating higher preference</span></span></span>
<span class="r-in"><span><span class="co">#notice we use "one minus RMSE" to give higher rank to variables with lower RMSE</span></span></span>
<span class="r-in"><span><span class="va">f_rmse</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span>, <span class="va">df</span><span class="op">)</span><span class="op">{</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="va">xy</span> <span class="op">&lt;-</span> <span class="va">df</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">y</span><span class="op">)</span><span class="op">]</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/stats/na.fail.html" class="external-link">na.omit</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>    <span class="fu"><a href="https://rdrr.io/r/base/scale.html" class="external-link">scale</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span>  <span class="fl">1</span> <span class="op">-</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html" class="external-link">sqrt</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html" class="external-link">mean</a></span><span class="op">(</span><span class="op">(</span><span class="va">xy</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span> <span class="op">-</span> <span class="va">xy</span><span class="op">[</span>, <span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">^</span><span class="fl">2</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">preference.order</span> <span class="op">&lt;-</span> <span class="fu">preference_order</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors</span>,</span></span>
<span class="r-in"><span>  f <span class="op">=</span> <span class="va">f_rmse</span>,</span></span>
<span class="r-in"><span>  workers <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">preference.order</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                     predictor   preference</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1            biogeo_ecoregion  0.727344686</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2                 koppen_zone  0.557630869</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3       growing_season_length  0.554515080</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4          koppen_description  0.538782893</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5                    swi_mean  0.475226020</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 6               humidity_mean  0.467969373</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 7                koppen_group  0.444624151</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 8                country_name  0.413471311</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 9                biogeo_biome  0.405034875</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 10           cloud_cover_mean  0.375779034</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 11                  soil_type  0.374354695</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 12               humidity_max  0.351897438</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13              rainfall_mean  0.344109445</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 14            cloud_cover_max  0.329600086</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 15                    swi_max  0.322538389</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16               humidity_min  0.319968847</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 17    growing_season_rainfall  0.318525089</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18               biogeo_realm  0.257272814</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 19               rainfall_max  0.243226452</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 20              aridity_index  0.242741004</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 21                  subregion  0.193450001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22            cloud_cover_min  0.160359850</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 23                  swi_range  0.160079415</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 24             rainfall_range  0.128650029</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 25                    swi_min  0.011102318</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 26               rainfall_min  0.008436478</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 27              soil_nitrogen -0.018116834</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 28                  continent -0.072620497</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 29                   soil_soc -0.094701026</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 30                     region -0.107788271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 31          cloud_cover_range -0.114069373</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32             topo_diversity -0.146693329</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33            temperature_min -0.154746778</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 34       soil_temperature_min -0.183121000</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 35                  soil_clay -0.200720251</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36             country_income -0.234283259</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 37                 topo_slope -0.252065667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 38 growing_season_temperature -0.331176895</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 39                  soil_silt -0.350890299</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40         country_population -0.367813225</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 41           temperature_mean -0.373846834</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 42                country_gdp -0.374704749</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 43        growing_degree_days -0.386049487</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 44     evapotranspiration_min -0.410209439</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 45              solar_rad_min -0.442449313</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 46      soil_temperature_mean -0.518818650</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 47             topo_elevation -0.529824980</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 48                  soil_sand -0.553548230</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 49             humidity_range -0.586430925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 50            solar_rad_range -0.642959090</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 51    evapotranspiration_mean -0.679330603</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 52            temperature_max -0.707066272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53             solar_rad_mean -0.727275193</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 54    temperature_seasonality -0.730677787</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 55          temperature_range -0.796981943</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56   evapotranspiration_range -0.807495658</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57              solar_rad_max -0.849458633</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 58     evapotranspiration_max -0.853114399</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 59     soil_temperature_range -0.862214159</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 60       soil_temperature_max -0.886835925</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 61                    soil_ph -0.931834336</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Blas M. Benito.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

