<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Automated Multicollinearity Filtering with Variance Inflation Factors — vif_select • collinear</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Automated Multicollinearity Filtering with Variance Inflation Factors — vif_select"><meta name="description" content="This function automatizes multicollinearity filtering in data frames with numeric predictors by combining two methods:
Preference Order: method to rank and preserve relevant variables during  multicollinearity filtering. See argument preference_order and function preference_order().
VIF-based filtering: recursive algorithm to identify and remove predictors with a VIF above a given threshold.


When the argument preference_order is not provided, the predictors are ranked lower to higher VIF. The predictor selection resulting from this option, albeit diverse and uncorrelated, might not be the one with the highest overall predictive power when used in a model.
Please check the sections Preference Order, Variance Inflation Factors, and VIF-based Filtering at the end of this help file for further details."><meta property="og:description" content="This function automatizes multicollinearity filtering in data frames with numeric predictors by combining two methods:
Preference Order: method to rank and preserve relevant variables during  multicollinearity filtering. See argument preference_order and function preference_order().
VIF-based filtering: recursive algorithm to identify and remove predictors with a VIF above a given threshold.


When the argument preference_order is not provided, the predictors are ranked lower to higher VIF. The predictor selection resulting from this option, albeit diverse and uncorrelated, might not be the one with the highest overall predictive power when used in a model.
Please check the sections Preference Order, Variance Inflation Factors, and VIF-based Filtering at the end of this help file for further details."><meta property="og:image" content="https://blasbenito.github.io/collinear/logo.png"><link rel="stylesheet" href="extra.css"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">collinear</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">2.0.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="dropdown-item" href="../articles/how_it_works.html">collinear: How It Works</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Blog Posts</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.blasbenito.com/post/multicollinearity-model-interpretability/">Multicollinearity Hinders Model Interpretability</a></li>
    <li><a class="external-link dropdown-item" href="https://www.blasbenito.com/post/variance-inflation-factor/">Everything About Variance Inflation Factors</a></li>
    <li><a class="external-link dropdown-item" href="https://www.blasbenito.com/post/target-encoding/">Mapping Categorical Predictors to Numeric</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/blasbenito/collinear/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Automated Multicollinearity Filtering with Variance Inflation Factors</h1>
      <small class="dont-index">Source: <a href="https://github.com/blasbenito/collinear/blob/main/R/vif_select.R" class="external-link"><code>R/vif_select.R</code></a></small>
      <div class="d-none name"><code>vif_select.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function automatizes multicollinearity filtering in data frames with numeric predictors by combining two methods:</p><ul><li><p><strong>Preference Order</strong>: method to rank and preserve relevant variables during  multicollinearity filtering. See argument <code>preference_order</code> and function <code><a href="preference_order.html">preference_order()</a></code>.</p></li>
<li><p><strong>VIF-based filtering</strong>: recursive algorithm to identify and remove predictors with a VIF above a given threshold.</p></li>
</ul><p>When the argument <code>preference_order</code> is not provided, the predictors are ranked lower to higher VIF. The predictor selection resulting from this option, albeit diverse and uncorrelated, might not be the one with the highest overall predictive power when used in a model.</p>
<p>Please check the sections <strong>Preference Order</strong>, <strong>Variance Inflation Factors</strong>, and <strong>VIF-based Filtering</strong> at the end of this help file for further details.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">vif_select</span><span class="op">(</span></span>
<span>  df <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  predictors <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  preference_order <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  max_vif <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  quiet <span class="op">=</span> <span class="cn">FALSE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(required; data frame, tibble, or sf) A data frame with responses and predictors. Default: NULL.</p></dd>


<dt id="arg-predictors">predictors<a class="anchor" aria-label="anchor" href="#arg-predictors"></a></dt>
<dd><p>(optional; character vector) Names of the predictors to select from <code>df</code>. If omitted, all numeric columns in <code>df</code> are used instead. If argument <code>response</code> is not provided, non-numeric variables are ignored. Default: NULL</p></dd>


<dt id="arg-preference-order">preference_order<a class="anchor" aria-label="anchor" href="#arg-preference-order"></a></dt>
<dd><p>(optional; string, character vector, output of <code><a href="preference_order.html">preference_order()</a></code>). Defines a priority order, from first to last, to preserve predictors during the selection process. Accepted inputs are:</p><ul><li><p><strong>"auto"</strong> (default): if <code>response</code> is not NULL, calls <code><a href="preference_order.html">preference_order()</a></code> for internal computation.</p></li>
<li><p><strong>character vector</strong>: predictor names in a custom preference order.</p></li>
<li><p><strong>data frame</strong>: output of <code><a href="preference_order.html">preference_order()</a></code> from <code>response</code> of length one.</p></li>
<li><p><strong>named list</strong>: output of <code><a href="preference_order.html">preference_order()</a></code> from <code>response</code> of length two or more.</p></li>
<li><p><strong>NULL</strong>: disabled.</p></li>
</ul><p>. Default: "auto"</p></dd>


<dt id="arg-max-vif">max_vif<a class="anchor" aria-label="anchor" href="#arg-max-vif"></a></dt>
<dd><p>(optional, numeric) Maximum Variance Inflation Factor allowed during variable selection. Recommended values are between 2.5 and 10. Higher values return larger number of predictors with a higher multicollinearity. If NULL, the variance inflation analysis is disabled. Default: 5.</p></dd>


<dt id="arg-quiet">quiet<a class="anchor" aria-label="anchor" href="#arg-quiet"></a></dt>
<dd><p>(optional; logical) If FALSE, messages generated during the execution of the function are printed to the console Default: FALSE</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>

<ul><li><p>character vector if <code>response</code> is NULL or is a string.</p></li>
<li><p>named list if <code>response</code> is a character vector.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="preference-order">Preference Order<a class="anchor" aria-label="anchor" href="#preference-order"></a></h2>



<p>This feature is designed to help protect important predictors during the multicollinearity filtering. It involves the arguments <code>preference_order</code> and <code>f</code>.</p>
<p>The argument <code>preference_order</code> accepts:</p><ul><li><p>: A character vector of predictor names in a custom order of preference, from first to last. This vector does not need to contain all predictor names, but only the ones relevant to the user.</p></li>
<li><p>A data frame returned by <code><a href="preference_order.html">preference_order()</a></code>, which ranks predictors based on their association with a response variable.</p></li>
<li><p>If NULL, and <code>response</code> is provided, then <code><a href="preference_order.html">preference_order()</a></code> is used internally to rank the predictors using the function <code>f</code>. If <code>f</code> is NULL as well, then <code><a href="f_auto.html">f_auto()</a></code> selects a proper function based on the data properties.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="variance-inflation-factors">Variance Inflation Factors<a class="anchor" aria-label="anchor" href="#variance-inflation-factors"></a></h2>



<p>The Variance Inflation Factor for a given variable \(a\) is computed as \(1/(1-R2)\), where \(R2\) is the multiple R-squared of a multiple regression model fitted using \(a\) as response and all other predictors in the input data frame as predictors, as in  \(a = b + c + ...\).</p>
<p>The square root of the VIF of \(a\) is the factor by which the confidence interval of the estimate for \(a\) in the linear model \(y = a + b + c + ...\)` is widened by multicollinearity in the model predictors.</p>
<p>The range of VIF values is (1, Inf]. The recommended thresholds for maximum VIF may vary depending on the source consulted, being the most common values, 2.5, 5, and 10.</p>
    </div>
    <div class="section level2">
    <h2 id="vif-based-filtering">VIF-based Filtering<a class="anchor" aria-label="anchor" href="#vif-based-filtering"></a></h2>



<p>The function <code>vif_select()</code> computes Variance Inflation Factors and removes variables iteratively, until all variables in the resulting selection have a VIF below <code>max_vif</code>.</p>
<p>If the argument <code>preference_order</code> is not provided, all variables are ranked from lower to higher VIF, as returned by <code><a href="vif_df.html">vif_df()</a></code>, and the variable with the higher VIF above <code>max_vif</code> is removed on each iteration.</p>
<p>If <code>preference_order</code> is defined, whenever two or more variables are above <code>max_vif</code>, the one higher in <code>preference_order</code> is preserved, and the next one with a higher VIF is removed. For example, for the predictors and preference order \(a\) and \(b\), if any of their VIFs is higher than <code>max_vif</code>, then \(b\) will be removed no matter whether its VIF is lower or higher than \(a\)'s VIF. If their VIF scores are lower than <code>max_vif</code>, then both are preserved.</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>David A. Belsley, D.A., Kuh, E., Welsch, R.E. (1980). Regression Diagnostics: Identifying Influential Data and Sources of Collinearity. John Wiley &amp; Sons. DOI: 10.1002/0471725153.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other vif:
<code><a href="vif_df.html">vif_df</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Blas M. Benito, PhD</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co">#subset to limit example run time</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="va">vi</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">predictors</span> <span class="op">&lt;-</span> <span class="va">vi_predictors</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="va">predictors_numeric</span> <span class="op">&lt;-</span> <span class="va">vi_predictors_numeric</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">10</span><span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#predictors has mixed types</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/lapply.html" class="external-link">sapply</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  X <span class="op">=</span> <span class="va">df</span><span class="op">[</span>, <span class="va">predictors</span>, drop <span class="op">=</span> <span class="cn">FALSE</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  FUN <span class="op">=</span> <span class="va">class</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        koppen_zone       koppen_group koppen_description          soil_type </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        "character"        "character"        "character"           "factor" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>         topo_slope     topo_diversity     topo_elevation           swi_mean </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          "integer"          "integer"          "integer"          "numeric" </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            swi_max            swi_min </span>
<span class="r-out co"><span class="r-pr">#&gt;</span>          "numeric"          "numeric" </span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#categorical predictors are ignored</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">vif_select</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">predictors</span>,</span></span>
<span class="r-in"><span>  max_vif <span class="op">=</span> <span class="fl">2.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): these predictors are not numeric and will be ignored: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - koppen_zone</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - koppen_group</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - koppen_description</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - soil_type.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): argument 'preference_order' is NULL, ranking predictors from lower to higher multicollinearity.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): selected predictors: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_elevation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_diversity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_slope</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - swi_min</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - swi_max</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "topo_elevation" "topo_diversity" "topo_slope"     "swi_min"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [5] "swi_max"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"validated")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#all these have a VIF lower than max_vif (2.5)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="vif_df.html">vif_df</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">x</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>        predictor    vif</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 4        swi_min 1.7846</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 5        swi_max 1.7242</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3     topo_slope 1.6045</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2 topo_diversity 1.4499</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 topo_elevation 1.1994</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#higher max_vif results in larger selection</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">vif_select</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">predictors_numeric</span>,</span></span>
<span class="r-in"><span>  max_vif <span class="op">=</span> <span class="fl">10</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): argument 'preference_order' is NULL, ranking predictors from lower to higher multicollinearity.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): selected predictors: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_elevation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_diversity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_slope</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - swi_mean</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - soil_temperature_max</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - soil_temperature_min</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - swi_min</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "topo_elevation"       "topo_diversity"       "topo_slope"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "swi_mean"             "soil_temperature_max" "soil_temperature_min"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [7] "swi_min"             </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"validated")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#smaller max_vif results in smaller selection</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">vif_select</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">predictors_numeric</span>,</span></span>
<span class="r-in"><span>  max_vif <span class="op">=</span> <span class="fl">2.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): argument 'preference_order' is NULL, ranking predictors from lower to higher multicollinearity.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): selected predictors: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_elevation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_diversity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_slope</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - swi_mean</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - soil_temperature_max</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "topo_elevation"       "topo_diversity"       "topo_slope"          </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "swi_mean"             "soil_temperature_max"</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"validated")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#custom preference order</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">vif_select</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">predictors_numeric</span>,</span></span>
<span class="r-in"><span>  preference_order <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    <span class="st">"swi_mean"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"soil_temperature_mean"</span>,</span></span>
<span class="r-in"><span>    <span class="st">"topo_elevation"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  max_vif <span class="op">=</span> <span class="fl">2.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): selected predictors: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - swi_mean</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - soil_temperature_mean</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_elevation</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_diversity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_slope</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "swi_mean"              "soil_temperature_mean" "topo_elevation"       </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "topo_diversity"        "topo_slope"           </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"validated")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#using automated preference order</span></span></span>
<span class="r-in"><span><span class="va">df_preference</span> <span class="op">&lt;-</span> <span class="fu"><a href="preference_order.html">preference_order</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_numeric"</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">predictors_numeric</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::preference_order(): ranking predictors for response 'vi_numeric'.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::f_auto(): selected function: 'f_r2_pearson()'.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">vif_select</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">predictors_numeric</span>,</span></span>
<span class="r-in"><span>  preference_order <span class="op">=</span> <span class="va">df_preference</span>,</span></span>
<span class="r-in"><span>  max_vif <span class="op">=</span> <span class="fl">2.5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): selected predictors: </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - swi_mean</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - soil_temperature_max</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_diversity</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_slope</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span>  - topo_elevation</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "swi_mean"             "soil_temperature_max" "topo_diversity"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [4] "topo_slope"           "topo_elevation"      </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> attr(,"validated")</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] TRUE</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#categorical predictors are ignored</span></span></span>
<span class="r-in"><span><span class="co">#the function returns NA</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">vif_select</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">vi_predictors_categorical</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): no numeric predictors available, skipping VIF-based filtering.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> character(0)</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#if predictors has length 1</span></span></span>
<span class="r-in"><span><span class="co">#selection is skipped</span></span></span>
<span class="r-in"><span><span class="co">#and data frame with one row is returned</span></span></span>
<span class="r-in"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu">vif_select</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">df</span>,</span></span>
<span class="r-in"><span>  predictors <span class="op">=</span> <span class="va">predictors_numeric</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> collinear::vif_select(): only one predictor available, skipping VIF-based filtering.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">x</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "topo_slope"</span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://blasbenito.com" class="external-link">Blas M. Benito</a>.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

