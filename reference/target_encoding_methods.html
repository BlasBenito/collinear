<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Target Encoding Methods — target_encoding_mean • collinear</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Target Encoding Methods — target_encoding_mean"><meta name="description" content='Methods to apply target-encoding to transform categorical variables into numeric.
The functions implemented are:
target_encoding_mean(): Each category is identified by the mean of the response over the category cases. The argument smoothing controls pushes the mean of small groups towards the global mean to avoid overfitting. White noise can be added via the white_noise argument. Columns encoded with this function are identified by the suffix "__encoded_mean". If white_noise is used, then the amount of white noise is also added to the suffix.
target_encoding_rank(): Each category is identified by the rank of the mean of the response variable over the category cases. The category with the lower mean receives the rank 1. White noise can be added via the white_noise argument. Columns encoded with this function are identified by the suffix "__encoded_rank". If white_noise is used, then the amount of noise is also added to the suffix.
target_encoding_rnorm(): Each case in a category receives a value coming from a normal distribution with the mean and the standard deviation of the response over the cases of the category. The argument rnorm_sd_multiplier multiplies the standard deviation to reduce the spread of the obtained values. Columns encoded with this function are identified by the suffix "__encoded_rnorm_rnorm_sd_multiplier_X", where X is the amount of rnorm_sd_multiplier used.
target_encoding_loo(): The suffix "loo" stands for "leave-one-out". Each case in a category is encoded as the average of the response over the other cases of the category Columns encoded with this function are identified by the suffix "__encoded_loo".

'><meta property="og:description" content='Methods to apply target-encoding to transform categorical variables into numeric.
The functions implemented are:
target_encoding_mean(): Each category is identified by the mean of the response over the category cases. The argument smoothing controls pushes the mean of small groups towards the global mean to avoid overfitting. White noise can be added via the white_noise argument. Columns encoded with this function are identified by the suffix "__encoded_mean". If white_noise is used, then the amount of white noise is also added to the suffix.
target_encoding_rank(): Each category is identified by the rank of the mean of the response variable over the category cases. The category with the lower mean receives the rank 1. White noise can be added via the white_noise argument. Columns encoded with this function are identified by the suffix "__encoded_rank". If white_noise is used, then the amount of noise is also added to the suffix.
target_encoding_rnorm(): Each case in a category receives a value coming from a normal distribution with the mean and the standard deviation of the response over the cases of the category. The argument rnorm_sd_multiplier multiplies the standard deviation to reduce the spread of the obtained values. Columns encoded with this function are identified by the suffix "__encoded_rnorm_rnorm_sd_multiplier_X", where X is the amount of rnorm_sd_multiplier used.
target_encoding_loo(): The suffix "loo" stands for "leave-one-out". Each case in a category is encoded as the average of the response over the other cases of the category Columns encoded with this function are identified by the suffix "__encoded_loo".

'></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">collinear</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.1.2</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/blasbenito/collinear/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Target Encoding Methods</h1>
      <small class="dont-index">Source: <a href="https://github.com/blasbenito/collinear/blob/main/R/target_encoding_methods.R" class="external-link"><code>R/target_encoding_methods.R</code></a></small>
      <div class="d-none name"><code>target_encoding_methods.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Methods to apply target-encoding to transform categorical variables into numeric.
The functions implemented are:</p><ul><li><p><code>target_encoding_mean()</code>: Each category is identified by the mean of the response over the category cases. The argument <code>smoothing</code> controls pushes the mean of small groups towards the global mean to avoid overfitting. White noise can be added via the <code>white_noise</code> argument. Columns encoded with this function are identified by the suffix "__encoded_mean". If <code>white_noise</code> is used, then the amount of white noise is also added to the suffix.</p></li>
<li><p><code>target_encoding_rank()</code>: Each category is identified by the rank of the mean of the response variable over the category cases. The category with the lower mean receives the rank 1. White noise can be added via the <code>white_noise</code> argument. Columns encoded with this function are identified by the suffix "__encoded_rank". If <code>white_noise</code> is used, then the amount of noise is also added to the suffix.</p></li>
<li><p><code>target_encoding_rnorm()</code>: Each case in a category receives a value coming from a normal distribution with the mean and the standard deviation of the response over the cases of the category. The argument <code>rnorm_sd_multiplier</code> multiplies the standard deviation to reduce the spread of the obtained values. Columns encoded with this function are identified by the suffix "__encoded_rnorm_rnorm_sd_multiplier_X", where X is the amount of <code>rnorm_sd_multiplier</code> used.</p></li>
<li><p><code>target_encoding_loo()</code>: The suffix "loo" stands for "leave-one-out". Each case in a category is encoded as the average of the response over the other cases of the category Columns encoded with this function are identified by the suffix "__encoded_loo".</p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">target_encoding_mean</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">response</span>,</span>
<span>  <span class="va">predictor</span>,</span>
<span>  smoothing <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  white_noise <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">target_encoding_rnorm</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">response</span>,</span>
<span>  <span class="va">predictor</span>,</span>
<span>  rnorm_sd_multiplier <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">target_encoding_rank</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">response</span>,</span>
<span>  <span class="va">predictor</span>,</span>
<span>  white_noise <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">target_encoding_loo</span><span class="op">(</span></span>
<span>  <span class="va">df</span>,</span>
<span>  <span class="va">response</span>,</span>
<span>  <span class="va">predictor</span>,</span>
<span>  white_noise <span class="op">=</span> <span class="fl">0</span>,</span>
<span>  seed <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  replace <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">add_white_noise</span><span class="op">(</span><span class="va">df</span>, <span class="va">response</span>, <span class="va">predictor</span>, white_noise <span class="op">=</span> <span class="fl">0.1</span>, seed <span class="op">=</span> <span class="fl">1</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-df">df<a class="anchor" aria-label="anchor" href="#arg-df"></a></dt>
<dd><p>(required; data frame, tibble, or sf) A data frame with numeric predictors, and optionally a numeric response and categorical predictors. Default: NULL.</p></dd>


<dt id="arg-response">response<a class="anchor" aria-label="anchor" href="#arg-response"></a></dt>
<dd><p>(optional, character string) Name of a numeric (non-numerics are ignored) response variable in <code>df</code>, only required if there are categorical variables named in the argument <code>predictors</code>. Default: NULL.</p></dd>


<dt id="arg-predictor">predictor<a class="anchor" aria-label="anchor" href="#arg-predictor"></a></dt>
<dd><p>(required; character) Name of the categorical variable to encode. Default: NULL</p></dd>


<dt id="arg-smoothing">smoothing<a class="anchor" aria-label="anchor" href="#arg-smoothing"></a></dt>
<dd><p>(optional; numeric) Argument of <code>target_encoding_mean()</code> (method "mean_smoothing"). Minimum group size that keeps the mean of the group. Groups smaller than this have their means pulled towards the global mean of the response. Default: 0</p></dd>


<dt id="arg-white-noise">white_noise<a class="anchor" aria-label="anchor" href="#arg-white-noise"></a></dt>
<dd><p>(optional; numeric) Numeric with white noise values in the range 0-1, representing a fraction of the range of the response to be added as noise to the encoded variable. Controls the variability in the encoded variables to mitigate potential overfitting. Default: <code>0</code>.</p></dd>


<dt id="arg-seed">seed<a class="anchor" aria-label="anchor" href="#arg-seed"></a></dt>
<dd><p>(optional; integer) Random seed to facilitate reproducibility when <code>white_noise</code> is not 0. Default: 1</p></dd>


<dt id="arg-replace">replace<a class="anchor" aria-label="anchor" href="#arg-replace"></a></dt>
<dd><p>(optional; logical) If <code>TRUE</code>, the function replaces each categorical variable with its encoded version, and returns the input data frame with the encoded variables instead of the original ones. Default: FALSE</p></dd>


<dt id="arg-verbose">verbose<a class="anchor" aria-label="anchor" href="#arg-verbose"></a></dt>
<dd><p>(optional; logical) If TRUE, messages generated during the execution of the function are printed to the console Default: TRUE</p></dd>


<dt id="arg-rnorm-sd-multiplier">rnorm_sd_multiplier<a class="anchor" aria-label="anchor" href="#arg-rnorm-sd-multiplier"></a></dt>
<dd><p>(optional; numeric) Numeric with multiplier of the standard deviation of each group in the categorical variable, in the range 0-1. Controls the variability in the encoded variables to mitigate potential overfitting. Default: <code>1</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data frame</p>
    </div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p>Micci-Barreca, D. (2001) A Preprocessing Scheme for High-Cardinality Categorical Attributes in Classification and Prediction Problems. SIGKDD Explor. Newsl. 3, 1, 27-32 <a href="https://doi.org/10.1145/507533.507538" class="external-link">doi:10.1145/507533.507538</a></p></li>
</ul></div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p>Other target_encoding:
<code><a href="target_encoding_lab.html">target_encoding_lab</a>()</code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Blas M. Benito, PhD</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">vi</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#subset to limit example run time</span></span></span>
<span class="r-in"><span><span class="va">vi</span> <span class="op">&lt;-</span> <span class="va">vi</span><span class="op">[</span><span class="fl">1</span><span class="op">:</span><span class="fl">1000</span>, <span class="op">]</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#mean encoding</span></span></span>
<span class="r-in"><span><span class="co">#-------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#without noise</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">target_encoding_mean</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictor <span class="op">=</span> <span class="st">"soil_type"</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">soil_type</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"encoded variable"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"response"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="target_encoding_methods-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#with noise</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">target_encoding_mean</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictor <span class="op">=</span> <span class="st">"soil_type"</span>,</span></span>
<span class="r-in"><span>  white_noise <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">soil_type</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"encoded variable"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"response"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="target_encoding_methods-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#group rank</span></span></span>
<span class="r-in"><span><span class="co">#----------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">target_encoding_rank</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictor <span class="op">=</span> <span class="st">"soil_type"</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">soil_type</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"encoded variable"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"response"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="target_encoding_methods-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#leave-one-out</span></span></span>
<span class="r-in"><span><span class="co">#-------------</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#without noise</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">target_encoding_loo</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictor <span class="op">=</span> <span class="st">"soil_type"</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">soil_type</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"encoded variable"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"response"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="target_encoding_methods-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#with noise</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">target_encoding_loo</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictor <span class="op">=</span> <span class="st">"soil_type"</span>,</span></span>
<span class="r-in"><span>  white_noise <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">soil_type</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"encoded variable"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"response"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="target_encoding_methods-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#rnorm</span></span></span>
<span class="r-in"><span><span class="co">#-----</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#without sd multiplier</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">target_encoding_rnorm</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictor <span class="op">=</span> <span class="st">"soil_type"</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">soil_type</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"encoded variable"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"response"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="target_encoding_methods-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#with sd multiplier</span></span></span>
<span class="r-in"><span><span class="va">df</span> <span class="op">&lt;-</span> <span class="fu">target_encoding_rnorm</span><span class="op">(</span></span></span>
<span class="r-in"><span>  df <span class="op">=</span> <span class="va">vi</span>,</span></span>
<span class="r-in"><span>  response <span class="op">=</span> <span class="st">"vi_mean"</span>,</span></span>
<span class="r-in"><span>  predictor <span class="op">=</span> <span class="st">"soil_type"</span>,</span></span>
<span class="r-in"><span>  rnorm_sd_multiplier <span class="op">=</span> <span class="fl">0.1</span>,</span></span>
<span class="r-in"><span>  replace <span class="op">=</span> <span class="cn">TRUE</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">soil_type</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">df</span><span class="op">$</span><span class="va">vi_mean</span>,</span></span>
<span class="r-in"><span>  xlab <span class="op">=</span> <span class="st">"encoded variable"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"response"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="target_encoding_methods-7.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Blas M. Benito.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

